(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1692:(e,n,t)=>{"use strict";t.d(n,{default:()=>i});var o=t(5155),a=t(2115);let r={src:"/_next/static/media/panorama.19bdf579.png"};function i(e){let{rotating:n=!1}=e,t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e,o=t.current;if(!o)return;let a=o.getContext("webgl2",{antialias:!1});if(!a)return console.error("WebGL2 not supported");function i(e,n){let t=a.createShader(e);return a.shaderSource(t,n),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS)||console.error(a.getShaderInfoLog(t)),t}let s=a.createProgram();a.attachShader(s,i(a.VERTEX_SHADER,"#version 300 es\n    precision highp float;\n\n    in vec2 a_position;\n    out vec2 v_uv;\n\n    void main() {\n        v_uv = a_position * 0.5 + 0.5;\n        gl_Position = vec4(a_position, 0.0, 1.0);\n    }\n")),a.attachShader(s,i(a.FRAGMENT_SHADER,"#version 300 es\n    precision highp float;\n\n    uniform vec2 u_resolution;\n    uniform sampler2D u_panorama;\n    uniform vec2 u_panoramaSize;\n    uniform float u_yaw;\n    uniform float u_pitch;\n    uniform float u_fov;\n    \n    in vec2 v_uv;\n    out vec4 fragColor;\n    \n    const float PI = 3.141592653589793;\n    \n    void main() {\n        vec2 uv = (v_uv * u_resolution - 0.5 * u_resolution) / u_resolution.y;\n        \n        float fovScale = tan(u_fov * 0.5);\n        vec3 rd = normalize(vec3(uv.x * fovScale, uv.y * fovScale, 1.0));\n        \n        float cosPitch = cos(u_pitch);\n        float sinPitch = sin(u_pitch);\n        vec3 rd1 = vec3(rd.x,\n                        rd.y * cosPitch - rd.z * sinPitch,\n                        rd.y * sinPitch + rd.z * cosPitch);\n        \n        float cosYaw = cos(u_yaw);\n        float sinYaw = sin(u_yaw);\n        vec3 rdRot = vec3(rd1.x * cosYaw + rd1.z * sinYaw,\n                          rd1.y,\n                          -rd1.x * sinYaw + rd1.z * cosYaw);\n        \n        float theta = atan(rdRot.z, rdRot.x);\n        float phi   = asin(clamp(rdRot.y, -1.0, 1.0));\n        \n        float u = (theta + PI) / (2.0 * PI);\n        float v = (phi + 0.5 * PI) / PI;\n        \n        vec2 panoramaCoord = vec2(u * u_panoramaSize.x, v * u_panoramaSize.y);\n        fragColor = texture(u_panorama, panoramaCoord / u_panoramaSize);\n    }\n")),a.linkProgram(s),a.getProgramParameter(s,a.LINK_STATUS)||console.error(a.getProgramInfoLog(s)),a.useProgram(s),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),a.STATIC_DRAW);let c=a.getAttribLocation(s,"a_position");a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0);let l=a.getUniformLocation(s,"u_resolution"),u=a.getUniformLocation(s,"u_panoramaSize"),_=a.getUniformLocation(s,"u_yaw"),f=a.getUniformLocation(s,"u_pitch"),m=a.getUniformLocation(s,"u_fov"),d=0,v=performance.now(),h=window.devicePixelRatio||1;function E(){o.width=window.innerWidth*h,o.height=window.innerHeight*h,a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.uniform2f(l,o.width,o.height)}window.addEventListener("resize",E),E();let p=new Image;return p.src=r.src,p.onload=()=>{let t=a.createTexture();a.bindTexture(a.TEXTURE_2D,t),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,p),a.uniform2f(u,p.width,p.height),a.uniform1f(f,0),a.uniform1f(m,Math.PI/1.5),function t(){let o=performance.now(),r=(o-v)/1e3;v=o,n&&(d-=.02*r),a.uniform1f(_,d),a.drawArrays(a.TRIANGLE_STRIP,0,4),e=requestAnimationFrame(t)}(),o.style.opacity="1"},()=>{var n;cancelAnimationFrame(e),window.removeEventListener("resize",E),null==(n=a.getExtension("WEBGL_lose_context"))||n.loseContext()}},[n]),(0,o.jsx)("canvas",{ref:t,style:{position:"fixed",width:"100%",height:"100%",transition:"opacity 1s",opacity:0,zIndex:-1}})}},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},4258:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,4147,23)),Promise.resolve().then(t.t.bind(t,8489,23)),Promise.resolve().then(t.t.bind(t,6003,23)),Promise.resolve().then(t.bind(t,1692))},6003:()=>{},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{var n=n=>e(e.s=n);e.O(0,[34,441,684,358],()=>n(4258)),_N_E=e.O()}]);